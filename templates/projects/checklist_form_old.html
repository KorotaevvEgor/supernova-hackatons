{% extends 'base.html' %}
{% load static %}

{% block title %}–ß–µ–∫-–ª–∏—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ - {{ block.super }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Breadcrumb -->
        <nav class="flex mb-8" aria-label="Breadcrumb">
            <ol class="flex items-center space-x-4">
                <li>
                    <div>
                        <a href="{% url 'projects:construction_control_dashboard' %}" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-home"></i>
                            <span class="sr-only">–ú–æ–∏ –æ–±—ä–µ–∫—Ç—ã</span>
                        </a>
                    </div>
                </li>
                <li>
                    <div class="flex items-center">
                        <i class="fas fa-chevron-right text-gray-400 mr-4"></i>
                        <span class="text-sm font-medium text-gray-500">–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞</span>
                    </div>
                </li>
                <li>
                    <div class="flex items-center">
                        <i class="fas fa-chevron-right text-gray-400 mr-4"></i>
                        <span class="text-sm font-medium text-gray-900">–ß–µ–∫-–ª–∏—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</span>
                    </div>
                </li>
            </ol>
        </nav>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="mb-8">
            <div class="bg-white shadow-sm rounded-lg p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mr-4">
                            <i class="fas fa-clipboard-check text-white text-xl"></i>
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">–ß–µ–∫-–ª–∏—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞</h1>
                            <p class="text-gray-600">{{ activation.project.name }}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å</div>
                        <div class="text-2xl font-bold" id="completion-percentage">{{ checklist.completion_percentage }}%</div>
                        <div class="w-20 bg-gray-200 rounded-full h-2 mt-1">
                            <div class="bg-green-500 h-2 rounded-full transition-all duration-300" 
                                 id="progress-bar" 
                                 style="width: {{ checklist.completion_percentage }}%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ -->
        <div class="bg-white shadow-sm rounded-lg p-6 mb-8">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                <div>
                    <span class="font-medium text-gray-500">–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –ø—Ä–æ—Ä–∞–±:</span>
                    <div class="text-gray-900">{{ activation.assigned_foreman.get_full_name }}</div>
                </div>
                <div>
                    <span class="font-medium text-gray-500">–ö–æ–Ω—Ç—Ä–∞–∫—Ç:</span>
                    <div class="text-gray-900">{{ activation.project.contract_number }}</div>
                </div>
                <div>
                    <span class="font-medium text-gray-500">–ü–ª–∞–Ω–æ–≤–∞—è –¥–∞—Ç–∞:</span>
                    <div class="text-gray-900">{{ activation.project.planned_start_date|date:"d.m.Y" }}</div>
                </div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —á–µ–∫-–ª–∏—Å—Ç–∞ -->
        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <!-- –°–µ–∫—Ü–∏–∏ —á–µ–∫-–ª–∏—Å—Ç–∞ -->
            <div class="bg-white shadow-sm rounded-lg p-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-6">–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–∞ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</h2>
                
                <div class="space-y-8">
                    <!-- 1. –ù–∞–ª–∏—á–∏–µ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ–π, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π, —Ä–∞–±–æ—á–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ -->
                    <div class="checklist-item">
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                            <p class="text-sm text-blue-700">(–ø. 5.3. –°–ü 48.13330.2019. –ò–∑–º. ‚Ññ1. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞)</p>
                        </div>
                        
                        <h3 class="text-base font-semibold text-gray-900 mb-4">
                            üìã –ù–∞–ª–∏—á–∏–µ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ–π, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π, —Ä–∞–±–æ—á–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
                        </h3>
                        
                        <div class="flex space-x-4 mb-3">
                            <label class="inline-flex items-center">
                                <input type="radio" name="regulatory_documentation" value="yes" 
                                       {% if checklist.regulatory_documentation == 'yes' %}checked{% endif %}
                                       class="form-radio h-4 w-4 text-green-600">
                                <span class="ml-2 text-green-700 font-medium">–î–ê</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="regulatory_documentation" value="no" 
                                       {% if checklist.regulatory_documentation == 'no' %}checked{% endif %}
                                       class="form-radio h-4 w-4 text-red-600">
                                <span class="ml-2 text-red-700 font-medium">–ù–ï–¢</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="regulatory_documentation" value="not_required" 
                                       {% if checklist.regulatory_documentation == 'not_required' %}checked{% endif %}
                                       class="form-radio h-4 w-4 text-gray-600">
                                <span class="ml-2 text-gray-700 font-medium">–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è</span>
                            </label>
                        </div>
                        
                        <div class="mt-3">
                            <textarea name="regulatory_documentation_notes" 
                                      placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏..."
                                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"
                                      rows="2">{{ checklist.regulatory_documentation_notes }}</textarea>
                        </div>
                    </div>

                    <!-- 2. –ù–∞–ª–∏—á–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ, –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—â–µ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ -->
                    <div class="checklist-item border-t pt-8">
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                            <p class="text-sm text-blue-700">(–ø. 5.3. –°–ü 48.13330.2019. –ò–∑–º. ‚Ññ1. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞)</p>
                        </div>
                        
                        <h3 class="text-base font-semibold text-gray-900 mb-4">
                            üìÑ –ù–∞–ª–∏—á–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ, –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—â–µ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–±–æ—Ç)
                        </h3>
                        
                        <div class="flex space-x-4 mb-3">
                            <label class="inline-flex items-center">
                                <input type="radio" name="construction_manager_order" value="yes" 
                                       {% if checklist.construction_manager_order == 'yes' %}checked{% endif %}
                                       class="form-radio h-4 w-4 text-green-600">
                                <span class="ml-2 text-green-700 font-medium">–î–ê</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="construction_manager_order" value="no" 
                                       {% if checklist.construction_manager_order == 'no' %}checked{% endif %}
                                       class="form-radio h-4 w-4 text-red-600">
                                <span class="ml-2 text-red-700 font-medium">–ù–ï–¢</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="construction_manager_order" value="not_required" 
                                       {% if checklist.construction_manager_order == 'not_required' %}checked{% endif %}
                                       class="form-radio h-4 w-4 text-gray-600">
                                <span class="ml-2 text-gray-700 font-medium">–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è</span>
                            </label>
                        </div>
                        
                        <div class="mt-3">
                            <textarea name="construction_manager_order_notes" 
                                      placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –ø—Ä–∏–∫–∞–∑—É –Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ..."
                                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"
                                      rows="2">{{ checklist.construction_manager_order_notes }}</textarea>
                        </div>
                    </div>

                    <!-- 3. –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
                    <div class="checklist-item border-t pt-8">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input type="checkbox" 
                                       name="safety_measures"
                                       id="safety_measures"
                                       class="checklist-checkbox w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                       {% if checklist.safety_measures %}checked{% endif %}>
                            </div>
                            <div class="ml-3 flex-1">
                                <label for="safety_measures" class="text-base font-medium text-gray-900 cursor-pointer">
                                    ü¶∫ –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ–±–µ—Å–ø–µ—á–µ–Ω—ã
                                </label>
                                <p class="text-sm text-gray-500 mt-1">
                                    –ü—Ä–æ–≤–µ–¥–µ–Ω –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂, —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—â–∏—Ç—ã, –ø–ª–∞–Ω—ã —ç–≤–∞–∫—É–∞—Ü–∏–∏, –∞–ø—Ç–µ—á–∫–∏, –æ–≥–Ω–µ—Ç—É—à–∏—Ç–µ–ª–∏
                                </p>
                                <div class="mt-3">
                                    <textarea name="safety_notes" 
                                              placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏..."
                                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"
                                              rows="2">{{ checklist.safety_notes }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ -->
                    <div class="checklist-item border-t pt-8">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input type="checkbox" 
                                       name="equipment_ready"
                                       id="equipment_ready"
                                       class="checklist-checkbox w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                       {% if checklist.equipment_ready %}checked{% endif %}>
                            </div>
                            <div class="ml-3 flex-1">
                                <label for="equipment_ready" class="text-base font-medium text-gray-900 cursor-pointer">
                                    üöú –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
                                </label>
                                <p class="text-sm text-gray-500 mt-1">
                                    –°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ-–∏–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–±–æ—Ä—ã
                                </p>
                                <div class="mt-3">
                                    <textarea name="equipment_notes" 
                                              placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é..."
                                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"
                                              rows="2">{{ checklist.equipment_notes }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 5. –†–∞–∑—Ä–µ—à–µ–Ω–∏—è -->
                    <div class="checklist-item border-t pt-8">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input type="checkbox" 
                                       name="permits_obtained"
                                       id="permits_obtained"
                                       class="checklist-checkbox w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                       {% if checklist.permits_obtained %}checked{% endif %}>
                            </div>
                            <div class="ml-3 flex-1">
                                <label for="permits_obtained" class="text-base font-medium text-gray-900 cursor-pointer">
                                    üìÑ –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã
                                </label>
                                <p class="text-sm text-gray-500 mt-1">
                                    –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å –£–ö, —Ä–µ—Å—É—Ä—Å–æ—Å–Ω–∞–±–∂–∞—é—â–∏–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏
                                </p>
                                <div class="mt-3">
                                    <textarea name="permits_notes" 
                                              placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º..."
                                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"
                                              rows="2">{{ checklist.permits_notes }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 6. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ -->
                    <div class="checklist-item border-t pt-8">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input type="checkbox" 
                                       name="utilities_connected"
                                       id="utilities_connected"
                                       class="checklist-checkbox w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                       {% if checklist.utilities_connected %}checked{% endif %}>
                            </div>
                            <div class="ml-3 flex-1">
                                <label for="utilities_connected" class="text-base font-medium text-gray-900 cursor-pointer">
                                    ‚ö° –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
                                </label>
                                <p class="text-sm text-gray-500 mt-1">
                                    –í—Ä–µ–º–µ–Ω–Ω–æ–µ —ç–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ, –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ, –≤—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞
                                </p>
                                <div class="mt-3">
                                    <textarea name="utilities_notes" 
                                              placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º..."
                                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"
                                              rows="2">{{ checklist.utilities_notes }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 7. –î–æ—Å—Ç—É–ø -->
                    <div class="checklist-item border-t pt-8">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input type="checkbox" 
                                       name="access_organized"
                                       id="access_organized"
                                       class="checklist-checkbox w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"
                                       {% if checklist.access_organized %}checked{% endif %}>
                            </div>
                            <div class="ml-3 flex-1">
                                <label for="access_organized" class="text-base font-medium text-gray-900 cursor-pointer">
                                    üö™ –î–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç—É –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω
                                </label>
                                <p class="text-sm text-gray-500 mt-1">
                                    –ü–æ–¥—ä–µ–∑–¥–Ω—ã–µ –ø—É—Ç–∏, –ø–∞—Ä–∫–æ–≤–∫–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ-–ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Ä–µ–∂–∏–º, –æ—Ö—Ä–∞–Ω–∞
                                </p>
                                <div class="mt-3">
                                    <textarea name="access_notes" 
                                              placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –¥–æ—Å—Ç—É–ø—É..."
                                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"
                                              rows="2">{{ checklist.access_notes }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ -->
                <div class="border-t pt-8 mt-8">
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input type="checkbox" 
                                       name="overall_readiness"
                                       id="overall_readiness"
                                       class="w-5 h-5 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"
                                       {% if checklist.overall_readiness %}checked{% endif %}>
                            </div>
                            <div class="ml-3 flex-1">
                                <label for="overall_readiness" class="text-base font-semibold text-yellow-800 cursor-pointer">
                                    ‚úÖ –û–±—ä–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
                                </label>
                                <p class="text-sm text-yellow-700 mt-1">
                                    –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω—ã –∏ –æ–±—ä–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –Ω–∞—á–∞–ª—É —Ä–∞–±–æ—Ç
                                </p>
                                <div class="mt-3">
                                    <textarea name="additional_notes" 
                                              placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è..."
                                              class="w-full px-3 py-2 border border-yellow-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 text-sm"
                                              rows="3">{{ checklist.additional_notes }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div class="bg-white shadow-sm rounded-lg p-6">
                <div class="flex items-center justify-between">
                    <a href="{% url 'projects:construction_control_dashboard' %}" 
                       class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                        <i class="fas fa-arrow-left mr-2"></i>
                        –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
                    </a>
                    
                    <div class="flex space-x-3">
                        <button type="submit" 
                                name="save"
                                class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            <i class="fas fa-save mr-2"></i>
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
                        </button>
                        
                        <button type="submit" 
                                name="submit_for_review"
                                id="submit-for-review-btn"
                                class="inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
                                disabled>
                            <i class="fas fa-paper-plane mr-2"></i>
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä—É
                        </button>
                    </div>
                </div>
            </div>
        </form>

        <!-- –ü–æ–º–æ—â—å -->
        <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <i class="fas fa-lightbulb text-blue-400"></i>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-blue-800">
                        –ö–∞–∫ –∑–∞–ø–æ–ª–Ω—è—Ç—å —á–µ–∫-–ª–∏—Å—Ç?
                    </h3>
                    <div class="mt-2 text-sm text-blue-700">
                        <ul class="list-disc list-inside space-y-1">
                            <li>–û—Ç–º–µ—á–∞–π—Ç–µ –ø—É–Ω–∫—Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏</li>
                            <li>–í –ø—Ä–∏–º–µ—á–∞–Ω–∏—è—Ö —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</li>
                            <li>–ß—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–º–µ—á–µ–Ω—ã –í–°–ï –ø—É–Ω–∫—Ç—ã –≤–∫–ª—é—á–∞—è –∏—Ç–æ–≥–æ–≤—É—é –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å</li>
                            <li>–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ–∫-–ª–∏—Å—Ç –ø–æ—Å—Ç—É–ø–∏—Ç –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä—É –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const checkboxes = document.querySelectorAll('.checklist-checkbox');
    const overallReadinessCheckbox = document.getElementById('overall_readiness');
    const submitButton = document.getElementById('submit-for-review-btn');
    const completionPercentage = document.getElementById('completion-percentage');
    const progressBar = document.getElementById('progress-bar');
    
    function updateProgress() {
        const mainCheckboxes = document.querySelectorAll('.checklist-checkbox');
        const checkedCount = Array.from(mainCheckboxes).filter(cb => cb.checked).length;
        const percentage = Math.round((checkedCount / mainCheckboxes.length) * 100);
        
        completionPercentage.textContent = percentage + '%';
        progressBar.style.width = percentage + '%';
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
        if (percentage === 100) {
            progressBar.className = 'bg-green-500 h-2 rounded-full transition-all duration-300';
        } else if (percentage >= 70) {
            progressBar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-300';
        } else {
            progressBar.className = 'bg-red-500 h-2 rounded-full transition-all duration-300';
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
        const allMainChecked = Array.from(mainCheckboxes).every(cb => cb.checked);
        const overallChecked = overallReadinessCheckbox.checked;
        
        if (allMainChecked && overallChecked) {
            submitButton.disabled = false;
            submitButton.classList.remove('opacity-50', 'cursor-not-allowed');
        } else {
            submitButton.disabled = true;
            submitButton.classList.add('opacity-50', 'cursor-not-allowed');
        }
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateProgress);
    });
    
    overallReadinessCheckbox.addEventListener('change', updateProgress);
    
    // –ò–Ω–∏—Ü–∏–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    updateProgress();
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –æ—Ç–º–µ—á–µ–Ω–∏–∏ —á–µ–∫–±–æ–∫—Å–æ–≤
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const item = this.closest('.checklist-item');
            if (this.checked) {
                item.classList.add('bg-green-50', 'border-l-4', 'border-green-500', 'pl-4');
                // –ù–µ–±–æ–ª—å—à–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
                item.style.transform = 'scale(1.01)';
                setTimeout(() => {
                    item.style.transform = 'scale(1)';
                }, 200);
            } else {
                item.classList.remove('bg-green-50', 'border-l-4', 'border-green-500', 'pl-4');
            }
        });
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —É–∂–µ –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (checkbox.checked) {
            const item = checkbox.closest('.checklist-item');
            item.classList.add('bg-green-50', 'border-l-4', 'border-green-500', 'pl-4');
        }
    });
});
</script>
{% endblock %}