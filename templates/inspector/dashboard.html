{% extends 'base.html' %}

{% block title %}Инспектор контрольного органа{% endblock %}

{% block content %}
<style>
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse-soft {
  0%, 100% {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(59, 130, 246, 0.6);
  }
}

@keyframes shimmer {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

.stat-card {
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  border: 1px solid #e2e8f0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  border-color: #cbd5e1;
}

.stat-icon {
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  box-shadow: 0 8px 16px rgba(59, 130, 246, 0.3);
}

.quick-action-card {
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.quick-action-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -200px;
  width: 200px;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.quick-action-card:hover::before {
  left: 100%;
}

.section-title {
  position: relative;
  display: inline-block;
}

.section-title::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6);
  border-radius: 2px;
}

.priority-urgent {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  color: white;
  box-shadow: 0 4px 8px rgba(245, 158, 11, 0.3);
}

.priority-critical {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
  animation: pulse-soft 2s ease-in-out infinite;
}

.glass-effect {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.gradient-text {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
</style>
<!-- Главный контейнер -->
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
    
    <!-- Геро-секция -->
    <div class="relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 rounded-3xl shadow-2xl">
      <!-- Фоновые элементы -->
      <div class="absolute top-0 right-0 w-96 h-96 bg-white opacity-5 rounded-full -mr-48 -mt-48"></div>
      <div class="absolute bottom-0 left-0 w-64 h-64 bg-white opacity-5 rounded-full -ml-32 -mb-32"></div>
      
      <div class="relative px-8 py-12">
        <div class="flex items-center justify-between">
          <div class="flex-1">
            <div class="flex items-center mb-4">
              <div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mr-6">
                <i class="fas fa-shield-alt text-3xl text-white"></i>
              </div>
              <div>
                <h1 class="text-4xl font-bold text-white mb-2">Инспектор контрольного органа</h1>
                <p class="text-xl text-blue-100 font-medium">{{ user.get_full_name }}</p>
              </div>
            </div>
            <p class="text-blue-200 text-lg max-w-2xl">
              Контроль и надзор за соблюдением норм строительства
            </p>
          </div>
          <div class="hidden lg:block">
            <div class="relative">
              <div class="w-32 h-32 bg-white bg-opacity-10 rounded-3xl flex items-center justify-center" style="animation: float 6s ease-in-out infinite;">
                <i class="fas fa-city text-6xl text-white opacity-80"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Основная статистика -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Всего нарушений -->
      <div class="stat-card rounded-2xl overflow-hidden group">
        <div class="p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="stat-icon w-14 h-14 rounded-xl flex items-center justify-center">
              <i class="fas fa-exclamation-triangle text-white text-xl"></i>
            </div>
            <div class="text-right">
              <div class="text-3xl font-bold text-gray-900 mb-1">{{ stats.total_violations }}</div>
              <div class="text-sm text-gray-500 uppercase tracking-wide font-semibold">Всего нарушений</div>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-gray-600 font-medium">Требует внимания</span>
            <a href="{% url 'inspector:violations_list' %}" class="inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors">
              Подробнее <i class="fas fa-arrow-right ml-1"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Активные нарушения -->
      <div class="stat-card rounded-2xl overflow-hidden group">
        <div class="p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="stat-icon w-14 h-14 rounded-xl flex items-center justify-center">
              <i class="fas fa-clock text-white text-xl"></i>
            </div>
            <div class="text-right">
              <div class="text-3xl font-bold text-gray-900 mb-1">{{ stats.active_violations }}</div>
              <div class="text-sm text-gray-500 uppercase tracking-wide font-semibold">Активные</div>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-gray-600 font-medium">В процессе</span>
            <a href="{% url 'inspector:violations_list' %}?status=in_correction" class="inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors">
              Подробнее <i class="fas fa-arrow-right ml-1"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Просроченные нарушения -->
      <div class="stat-card rounded-2xl overflow-hidden group {% if stats.overdue_violations > 0 %}priority-critical{% endif %}">
        <div class="p-6">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 {% if stats.overdue_violations > 0 %}bg-white bg-opacity-20{% else %}stat-icon{% endif %} rounded-xl flex items-center justify-center">
              <i class="fas fa-hourglass-end {% if stats.overdue_violations > 0 %}text-white{% else %}text-white{% endif %} text-xl"></i>
            </div>
            <div class="text-right">
              <div class="text-3xl font-bold {% if stats.overdue_violations > 0 %}text-white{% else %}text-gray-900{% endif %} mb-1">{{ stats.overdue_violations }}</div>
              <div class="text-sm {% if stats.overdue_violations > 0 %}text-red-100{% else %}text-gray-500{% endif %} uppercase tracking-wide font-semibold">Просроченные</div>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm {% if stats.overdue_violations > 0 %}text-red-100{% else %}text-gray-600{% endif %} font-medium">
              {% if stats.overdue_violations > 0 %}Срочно действовать!{% else %}Отлично{% endif %}
            </span>
            <a href="{% url 'inspector:violations_list' %}?overdue=true" 
               class="inline-flex items-center {% if stats.overdue_violations > 0 %}text-white hover:text-red-100{% else %}text-blue-600 hover:text-blue-700{% endif %} text-sm font-medium transition-colors">
              Подробнее <i class="fas fa-arrow-right ml-1"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Дополнительная статистика -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Заявки на пробы -->
      <div class="stat-card rounded-2xl p-6 group">
        <div class="flex items-center justify-between">
          <div class="flex-1">
            <div class="flex items-center mb-3">
              <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-vial text-white text-lg"></i>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-600 uppercase tracking-wide">Заявки на пробы</p>
                <p class="text-2xl font-bold text-gray-900">{{ stats.pending_lab_requests }}</p>
              </div>
            </div>
          </div>
          <a href="{% url 'inspector:lab_requests' %}" class="text-indigo-600 hover:text-indigo-700 transition-colors">
            <i class="fas fa-arrow-right text-lg"></i>
          </a>
        </div>
        <div class="mt-4 pt-4 border-t border-gray-100">
          <div class="flex items-center text-sm text-gray-600">
            <i class="fas fa-flask mr-2"></i>
            Лабораторные исследования
          </div>
        </div>
      </div>

      <!-- Ожидают одобрения -->
      <div class="stat-card rounded-2xl p-6 group {% if stats.pending_approvals > 0 %}ring-2 ring-blue-200 animate-pulse{% endif %}">
        <div class="flex items-center justify-between">
          <div class="flex-1">
            <div class="flex items-center mb-3">
              <div class="w-12 h-12 {% if stats.pending_approvals > 0 %}bg-gradient-to-br from-blue-500 to-blue-600{% else %}bg-gray-400{% endif %} rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-check-circle text-white text-lg {% if stats.pending_approvals > 0 %}animate-pulse{% endif %}"></i>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-600 uppercase tracking-wide">Ожидают одобрения</p>
                <p class="text-2xl font-bold {% if stats.pending_approvals > 0 %}text-blue-600{% else %}text-gray-900{% endif %}">{{ stats.pending_approvals }}</p>
              </div>
            </div>
          </div>
          <a href="{% url 'projects:inspector_activations' %}" class="{% if stats.pending_approvals > 0 %}text-blue-600 hover:text-blue-700{% else %}text-gray-400{% endif %} transition-colors">
            <i class="fas fa-arrow-right text-lg"></i>
          </a>
        </div>
        <div class="mt-4 pt-4 border-t border-gray-100">
          <div class="flex items-center text-sm {% if stats.pending_approvals > 0 %}text-blue-600{% else %}text-gray-600{% endif %}">
            <i class="fas fa-stamp mr-2"></i>
            {% if stats.pending_approvals > 0 %}Требует одобрения{% else %}Всё одобрено{% endif %}
          </div>
        </div>
      </div>

      <!-- Доступные проекты -->
      <div class="stat-card rounded-2xl p-6 group">
        <div class="flex items-center justify-between">
          <div class="flex-1">
            <div class="flex items-center mb-3">
              <div class="w-12 h-12 bg-gradient-to-br from-gray-500 to-gray-600 rounded-lg flex items-center justify-center mr-3">
                <i class="fas fa-building text-white text-lg"></i>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-600 uppercase tracking-wide">Доступно проектов</p>
                <p class="text-2xl font-bold text-gray-900">{{ stats.available_projects_count }}</p>
              </div>
            </div>
          </div>
          <div class="text-gray-400">
            <i class="fas fa-chevron-right text-lg"></i>
          </div>
        </div>
        <div class="mt-4 pt-4 border-t border-gray-100">
          <div class="flex items-center text-sm text-gray-600">
            <i class="fas fa-eye mr-2"></i>
            Под наблюдением
          </div>
        </div>
      </div>
    </div>

    <!-- Быстрые действия -->
    <div class="glass-effect rounded-3xl shadow-2xl overflow-hidden">
      <div class="bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6">
        <h2 class="section-title text-2xl font-bold text-white mb-2">
          <i class="fas fa-bolt mr-3"></i>
          Быстрые действия
        </h2>
        <p class="text-blue-100 text-lg">Основные функции инспектора</p>
      </div>
      <div class="p-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <!-- Зафиксировать нарушение -->
          <a href="{% url 'inspector:add_violation' %}" class="quick-action-card group">
            <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
              <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-exclamation-triangle text-white text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-2">Зафиксировать нарушение</h3>
              <p class="text-gray-600 text-sm leading-relaxed">Внести новое нарушение в систему</p>
              <div class="mt-4 flex items-center text-red-600 text-sm font-medium">
                Перейти <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
              </div>
            </div>
          </a>

          <!-- Заявка на пробы -->
          <a href="{% url 'inspector:create_lab_request' %}" class="quick-action-card group">
            <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
              <div class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-vial text-white text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-2">Заявка на пробы</h3>
              <p class="text-gray-600 text-sm leading-relaxed">Инициировать отбор проб материалов</p>
              <div class="mt-4 flex items-center text-indigo-600 text-sm font-medium">
                Перейти <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
              </div>
            </div>
          </a>

          <!-- Нарушения -->
          <a href="{% url 'inspector:violations_list' %}" class="quick-action-card group">
            <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
              <div class="w-16 h-16 bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-clipboard-list text-white text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-2">Список нарушений</h3>
              <p class="text-gray-600 text-sm leading-relaxed">Просмотреть все нарушения и их статус</p>
              <div class="mt-4 flex items-center text-gray-600 text-sm font-medium">
                Перейти <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
              </div>
            </div>
          </a>

          <!-- Одобрения -->
          <a href="{% url 'projects:inspector_activations' %}" class="quick-action-card group {% if stats.pending_approvals > 0 %}ring-4 ring-blue-200 ring-opacity-75{% endif %}">
            <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 {% if stats.pending_approvals > 0 %}bg-gradient-to-br from-blue-50 to-blue-100{% endif %}">
              <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 {% if stats.pending_approvals > 0 %}animate-pulse{% endif %}">
                <i class="fas fa-stamp text-white text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-2">Активация проектов</h3>
              <p class="text-gray-600 text-sm leading-relaxed">Одобрение проектов к началу работ</p>
              {% if stats.pending_approvals > 0 %}
              <div class="mt-3 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-600 text-white animate-pulse">
                <i class="fas fa-clock mr-1"></i>
                {{ stats.pending_approvals }} ожидает
              </div>
              {% endif %}
              <div class="mt-4 flex items-center text-blue-600 text-sm font-medium">
                Перейти <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- Основные секции данных -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Недавние нарушения -->
      <div class="glass-effect rounded-2xl shadow-xl overflow-hidden">
        <div class="bg-gradient-to-r from-red-500 to-red-600 px-6 py-4">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-white flex items-center">
              <i class="fas fa-exclamation-triangle mr-3"></i>
              Недавние нарушения
            </h2>
            <a href="{% url 'inspector:violations_list' %}" class="text-sm text-red-100 hover:text-white transition-colors font-medium">
              Все нарушения →
            </a>
          </div>
        </div>
        <div class="max-h-96 overflow-y-auto">
          {% for violation in recent_violations %}
            <div class="p-6 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors">
              <div class="flex items-start justify-between">
                <div class="flex-1 min-w-0">
                  <h3 class="text-base font-semibold text-gray-900 mb-1">
                    {{ violation.title }}
                  </h3>
                  <p class="text-sm text-gray-600 mb-3">{{ violation.project.name }}</p>
                  <div class="flex flex-wrap items-center gap-3">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
                      {% if violation.status == 'detected' %}bg-slate-100 text-slate-800
                      {% elif violation.status == 'notified' %}bg-blue-100 text-blue-800
                      {% elif violation.status == 'in_correction' %}bg-indigo-100 text-indigo-800
                      {% elif violation.status == 'corrected' %}bg-gray-100 text-gray-800
                      {% elif violation.status == 'verified' %}bg-blue-100 text-blue-800
                      {% else %}bg-gray-100 text-gray-800
                      {% endif %}">
                      {{ violation.get_status_display }}
                    </span>
                    <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded">
                      {{ violation.detected_at|date:"d.m.Y H:i" }}
                    </span>
                    {% if violation.is_overdue %}
                      <span class="priority-urgent text-xs px-2 py-1 rounded font-medium">Просрочено</span>
                    {% endif %}
                  </div>
                </div>
                <div class="ml-4">
                  <a href="{% url 'inspector:violation_detail' violation.id %}" 
                     class="p-2 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors">
                    <i class="fas fa-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>
          {% empty %}
            <div class="p-12 text-center">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-check-circle text-3xl text-green-500"></i>
              </div>
              <h3 class="text-lg font-medium text-gray-900 mb-2">Отлично!</h3>
              <p class="text-gray-600">Нарушений пока нет</p>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- Заявки на лабораторные пробы -->
      <div class="glass-effect rounded-2xl shadow-xl overflow-hidden">
        <div class="bg-gradient-to-r from-indigo-500 to-indigo-600 px-6 py-4">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-white flex items-center">
              <i class="fas fa-vial mr-3"></i>
              Заявки на пробы
            </h2>
            <a href="{% url 'inspector:lab_requests' %}" class="text-sm text-indigo-100 hover:text-white transition-colors font-medium">
              Все заявки →
            </a>
          </div>
        </div>
        <div class="max-h-96 overflow-y-auto">
          {% for request in recent_lab_requests %}
            <div class="p-6 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors">
              <div class="flex items-start justify-between">
                <div class="flex-1 min-w-0">
                  <h3 class="text-base font-semibold text-gray-900 mb-1">
                    {{ request.material_type.name }}
                  </h3>
                  <p class="text-sm text-gray-600 mb-3">{{ request.project.name }}</p>
                  <div class="flex flex-wrap items-center gap-3">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
                      {% if request.status == 'requested' %}bg-slate-100 text-slate-800
                      {% elif request.status == 'scheduled' %}bg-blue-100 text-blue-800
                      {% elif request.status == 'sampling' %}bg-indigo-100 text-indigo-800
                      {% elif request.status == 'testing' %}bg-gray-100 text-gray-800
                      {% elif request.status == 'completed' %}bg-blue-100 text-blue-800
                      {% else %}bg-gray-100 text-gray-800
                      {% endif %}">
                      {{ request.get_status_display }}
                    </span>
                    <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded">
                      {{ request.requested_at|date:"d.m.Y" }}
                    </span>
                    {% if request.urgency == 'urgent' %}
                      <span class="priority-urgent text-xs px-2 py-1 rounded font-medium">Срочно</span>
                    {% elif request.urgency == 'critical' %}
                      <span class="priority-critical text-xs px-2 py-1 rounded font-medium">Критично</span>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          {% empty %}
            <div class="p-12 text-center">
              <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-vial text-3xl text-indigo-500"></i>
              </div>
              <h3 class="text-lg font-medium text-gray-900 mb-2">Пока пусто</h3>
              <p class="text-gray-600">Заявок на пробы пока нет</p>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Проекты ожидающие одобрения -->
    {% if projects_awaiting_approval %}
    <div class="glass-effect rounded-2xl shadow-xl overflow-hidden">
      <div class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4">
        <h2 class="text-xl font-bold text-white flex items-center">
          <i class="fas fa-hourglass-half mr-3"></i>
          Ожидают одобрения активации
        </h2>
        <p class="text-blue-100 mt-1">Проекты готовые к началу работ</p>
      </div>
      <div class="max-h-96 overflow-y-auto">
        {% for project in projects_awaiting_approval %}
          <div class="p-6 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors">
            <div class="flex items-center justify-between">
              <div class="flex-1 min-w-0">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">{{ project.name }}</h3>
                <p class="text-sm text-gray-600 mb-3">{{ project.address }}</p>
                <div class="flex flex-wrap items-center gap-4">
                  <span class="text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                    <i class="fas fa-calendar-alt mr-1"></i>
                    Плановое начало: {{ project.planned_start_date|date:"d.m.Y" }}
                  </span>
                  {% if project.foreman %}
                    <span class="text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                      <i class="fas fa-user-hard-hat mr-1"></i>
                      Прораб: {{ project.foreman.get_full_name }}
                    </span>
                  {% endif %}
                </div>
              </div>
              <div class="ml-6">
                <a href="{% url 'inspector:create_project_approval' project.id %}" 
                   class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105">
                  <i class="fas fa-stamp mr-2"></i>
                  Рассмотреть
                </a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
